!function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";function t(t,i){var s=t.nodeName.toLowerCase();if(-1!==e.inArray(s,i))return-1===e.inArray(s,u)||Boolean(t.nodeValue.match(m)||t.nodeValue.match(g));for(var n=e(i).filter(function(e,t){return t instanceof RegExp}),o=0,l=n.length;o<l;o++)if(s.match(n[o]))return!0;return!1}function i(e,i,s){if(s&&"function"==typeof s)return s(e);for(var n=Object.keys(i),o=0,l=e.length;o<l;o++)for(var r=e[o].querySelectorAll("*"),a=0,c=r.length;a<c;a++){var p=r[a],h=p.nodeName.toLowerCase();if(-1!==n.indexOf(h))for(var d=[].slice.call(p.attributes),u=[].concat(i["*"]||[],i[h]||[]),f=0,m=d.length;f<m;f++){var g=d[f];t(g,u)||p.removeAttribute(g.nodeName)}else p.parentNode.removeChild(p)}}function s(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==b.call(e))throw new TypeError;var i=t.length,s=String(e),n=s.length,o=1<arguments.length?arguments[1]:void 0,l=o?Number(o):0;l!=l&&(l=0);var r=Math.min(Math.max(l,0),i);if(i<n+r)return!1;for(var a=-1;++a<n;)if(t.charCodeAt(r+a)!=s.charCodeAt(a))return!1;return!0}function n(e,t){var i,s=e.selectedOptions,n=[];if(t){for(var o=0,l=s.length;o<l;o++)(i=s[o]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||n.push(i);return n}return s}function o(e,t){for(var i,s=[],n=t||e.selectedOptions,o=0,l=n.length;o<l;o++)(i=n[o]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||s.push(i.value||i.text);return e.multiple?s:s.length?s[0]:null}function l(e,t,i,s){for(var n=["display","subtext","tokens"],o=!1,l=0;l<n.length;l++){var r=n[l],a=e[r];if(a&&(a=a.toString(),"display"===r&&(a=a.replace(/<[^>]+>/g,"")),s&&(a=c(a)),a=a.toUpperCase(),o="contains"===i?0<=a.indexOf(t):a.startsWith(t)))break}return o}function r(e){return parseInt(e,10)||0}function a(e){return T[e]}function c(e){return(e=e.toString())&&e.replace(A,a).replace(D,"")}function p(e){return S[e]}function h(t){var i,s=arguments,n=t;if([].shift.apply(s),!R.success){try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(t){V.BootstrapVersion?R.full=V.BootstrapVersion.split(" ")[0].split("."):(R.full=[R.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",t))}R.major=R.full[0],R.success=!0}if("4"===R.major){var o=[];V.DEFAULTS.style===G.BUTTONCLASS&&o.push({name:"style",className:"BUTTONCLASS"}),V.DEFAULTS.iconBase===G.ICONBASE&&o.push({name:"iconBase",className:"ICONBASE"}),V.DEFAULTS.tickIcon===G.TICKICON&&o.push({name:"tickIcon",className:"TICKICON"}),G.DIVIDER="dropdown-divider",G.SHOW="show",G.BUTTONCLASS="btn-light",G.POPOVERHEADER="popover-header",G.ICONBASE="",G.TICKICON="bs-ok-default";for(var l=0;l<o.length;l++)t=o[l],V.DEFAULTS[t.name]=G[t.className]}var r=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),l="object"==typeof n&&n;if(o){if(l)for(var r in l)l.hasOwnProperty(r)&&(o.options[r]=l[r])}else{var a=t.data();for(var c in a)a.hasOwnProperty(c)&&-1!==e.inArray(c,d)&&delete a[c];var p=e.extend({},V.DEFAULTS,e.fn.selectpicker.defaults||{},a,l);p.template=e.extend({},V.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},a.template,l.template),t.data("selectpicker",o=new V(this,p))}"string"==typeof n&&(i=o[n]instanceof Function?o[n].apply(o,s):o.options[n])}});return void 0!==i?i:r}var d=["sanitize","whiteList","sanitizeFn"],u=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],f={"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},m=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;"classList"in document.createElement("_")||function(t){if("Element"in t){var i="classList",s="prototype",n=t.Element[s],o=Object,l=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(o.defineProperty){var r={get:l,enumerable:!0,configurable:!0};try{o.defineProperty(n,i,r)}catch(t){void 0!==t.number&&-2146823252!==t.number||(r.enumerable=!1,o.defineProperty(n,i,r))}}else o[s].__defineGetter__&&n.__defineGetter__(i,l)}}(window);var v,b,w=document.createElement("_");if(w.classList.add("c1","c2"),!w.classList.contains("c2")){var x=DOMTokenList.prototype.add,I=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,x.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,I.bind(this))}}if(w.classList.toggle("c3",!1),w.classList.contains("c3")){var y=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:y.call(this,e)}}w=null,String.prototype.startsWith||(v=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),b={}.toString,v?v(String.prototype,"startsWith",{value:s,configurable:!0,writable:!0}):String.prototype.startsWith=s),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),HTMLSelectElement&&!HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")&&Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var k={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!k.useDefault&&e(t).data("selected",!0),k._set.apply(this,arguments)};var O=null,$=function(){try{return new Event("change"),!0}catch(e){return!1}}();e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?($?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var S,E,C,L,T={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},A=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,D=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g"),N=(S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E="(?:"+Object.keys(S).join("|")+")",C=RegExp(E),L=RegExp(E,"g"),function(e){return e=null==e?"":""+e,C.test(e)?e.replace(L,p):e}),z={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},R={success:!1,major:"3"};try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),R.major=R.full[0],R.success=!0}catch(f){}var H=0,B=".bs.select",G={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},P={MENU:"."+G.MENU},U={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment()};U.a.setAttribute("role","option"),U.subtext.className="text-muted",U.text=U.span.cloneNode(!1),U.text.className="text",U.checkMark=U.span.cloneNode(!1);var j=new RegExp("38|40"),W=new RegExp("^9$|27"),_=function(e,t,i){var s=U.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},M=function(e,t,i){var s=U.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&(s.className=t),"4"===R.major&&s.classList.add("dropdown-item"),i&&s.setAttribute("style",i),s},q=function(e,t){var i,s,n=U.text.cloneNode(!1);if(e.content)n.innerHTML=e.content;else{if(n.textContent=e.text,e.icon){var o=U.whitespace.cloneNode(!1);(s=(!0===t?U.i:U.span).cloneNode(!1)).className=e.iconBase+" "+e.icon,U.fragment.appendChild(s),U.fragment.appendChild(o)}e.subtext&&((i=U.subtext.cloneNode(!1)).textContent=e.subtext,n.appendChild(i))}if(!0===t)for(;0<n.childNodes.length;)U.fragment.appendChild(n.childNodes[0]);else U.fragment.appendChild(n);return U.fragment},F=function(e){var t,i,s=U.text.cloneNode(!1);if(s.innerHTML=e.label,e.icon){var n=U.whitespace.cloneNode(!1);(i=U.span.cloneNode(!1)).className=e.iconBase+" "+e.icon,U.fragment.appendChild(i),U.fragment.appendChild(n)}return e.subtext&&((t=U.subtext.cloneNode(!1)).textContent=e.subtext,s.appendChild(t)),U.fragment.appendChild(s),U.fragment},V=function(t,i){var s=this;k.useDefault||(e.valHooks.select.set=k._set,k.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{},search:{},current:{},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){s.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var n=this.options.windowPadding;"number"==typeof n&&(this.options.windowPadding=[n,n,n,n]),this.val=V.prototype.val,this.render=V.prototype.render,this.refresh=V.prototype.refresh,this.setStyle=V.prototype.setStyle,this.selectAll=V.prototype.selectAll,this.deselectAll=V.prototype.deselectAll,this.destroy=V.prototype.destroy,this.remove=V.prototype.remove,this.show=V.prototype.show,this.hide=V.prototype.hide,this.init()};V.VERSION="1.13.12",V.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:G.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:G.ICONBASE,tickIcon:G.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:f},V.prototype={constructor:V,init:function(){var e=this,t=this.$element.attr("id");H++,this.selectId="bs-select-"+H,this.$element[0].classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$element[0].classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(P.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element[0].classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(G.MENURIGHT),void 0!==t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.render(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+B,function(){if(e.isVirtual()){var t=e.$menuInner[0],i=t.firstChild.cloneNode(!1);t.replaceChild(i,t.firstChild),t.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide"+B,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+B,t)},"show.bs.dropdown":function(t){e.$element.trigger("show"+B,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+B,t)}}),e.$element[0].hasAttribute("required")&&this.$element.on("invalid"+B,function(){e.$button[0].classList.add("bs-invalid"),e.$element.on("shown"+B+".invalid",function(){e.$element.val(e.$element.val()).off("shown"+B+".invalid")}).on("rendered"+B,function(){this.validity.valid&&e.$button[0].classList.remove("bs-invalid"),e.$element.off("rendered"+B)}),e.$button.on("blur"+B,function(){e.$element.trigger("focus").trigger("blur"),e.$button.off("blur"+B)})}),setTimeout(function(){e.createLi(),e.$element.trigger("loaded"+B)})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",s="",n=this.autofocus?" autofocus":"";R.major<4&&this.$element.parent().hasClass("input-group")&&(s=" input-group-btn");var o,l="",r="",a="",c="";return this.options.header&&(l='<div class="'+G.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(r='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+N(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(a='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+G.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+G.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(c='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+G.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),o='<div class="dropdown bootstrap-select'+t+s+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+n+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===R.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+G.MENU+" "+("4"===R.major?"":G.SHOW)+'">'+l+r+a+'<div class="inner '+G.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+G.MENU+" inner "+("4"===R.major?G.SHOW:"")+'" role="presentation"></ul></div>'+c+"</div></div>",e(o)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=this.selectpicker.view.size=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,s,n){function o(e,s){var n,o,c,h,d,u,f,m,g=a.selectpicker.current.elements.length,v=[],b=!0,w=a.isVirtual();a.selectpicker.view.scrollTop=e,n=Math.ceil(a.sizeInfo.menuInnerHeight/a.sizeInfo.liHeight*1.5),o=Math.round(g/n)||1;for(var x=0;x<o;x++){var I=(x+1)*n;if(x===o-1&&(I=g),v[x]=[x*n+(x?1:0),I],!g)break;void 0===d&&e-1<=a.selectpicker.current.data[I-1].position-a.sizeInfo.menuInnerHeight&&(d=x)}if(void 0===d&&(d=0),u=[a.selectpicker.view.position0,a.selectpicker.view.position1],c=Math.max(0,d-1),h=Math.min(o-1,d+1),a.selectpicker.view.position0=!1===w?0:Math.max(0,v[c][0])||0,a.selectpicker.view.position1=!1===w?g:Math.min(g,v[h][1])||0,f=u[0]!==a.selectpicker.view.position0||u[1]!==a.selectpicker.view.position1,void 0!==a.activeIndex&&(r=a.selectpicker.main.elements[a.prevActiveIndex],p=a.selectpicker.main.elements[a.activeIndex],l=a.selectpicker.main.elements[a.selectedIndex],s&&(a.activeIndex!==a.selectedIndex&&a.defocusItem(p),a.activeIndex=void 0),a.activeIndex&&a.activeIndex!==a.selectedIndex&&a.defocusItem(l)),void 0!==a.prevActiveIndex&&a.prevActiveIndex!==a.activeIndex&&a.prevActiveIndex!==a.selectedIndex&&a.defocusItem(r),(s||f)&&(m=a.selectpicker.view.visibleElements?a.selectpicker.view.visibleElements.slice():[],a.selectpicker.view.visibleElements=!1===w?a.selectpicker.current.elements:a.selectpicker.current.elements.slice(a.selectpicker.view.position0,a.selectpicker.view.position1),a.setOptionStatus(),(t||!1===w&&s)&&(b=!function(e,t){return e.length===t.length&&e.every(function(e,i){return e===t[i]})}(m,a.selectpicker.view.visibleElements)),(s||!0===w)&&b)){var y,k,O=a.$menuInner[0],$=document.createDocumentFragment(),S=O.firstChild.cloneNode(!1),E=a.selectpicker.view.visibleElements,C=[];O.replaceChild(S,O.firstChild),x=0;for(var L=E.length;x<L;x++){var T,A,D=E[x];a.options.sanitize&&(T=D.lastChild)&&(A=a.selectpicker.current.data[x+a.selectpicker.view.position0])&&A.content&&!A.sanitized&&(C.push(T),A.sanitized=!0),$.appendChild(D)}if(a.options.sanitize&&C.length&&i(C,a.options.whiteList,a.options.sanitizeFn),!0===w?(y=0===a.selectpicker.view.position0?0:a.selectpicker.current.data[a.selectpicker.view.position0-1].position,k=a.selectpicker.view.position1>g-1?0:a.selectpicker.current.data[g-1].position-a.selectpicker.current.data[a.selectpicker.view.position1-1].position,O.firstChild.style.marginTop=y+"px",O.firstChild.style.marginBottom=k+"px"):(O.firstChild.style.marginTop=0,O.firstChild.style.marginBottom=0),O.firstChild.appendChild($),!0===w&&a.sizeInfo.hasScrollBar){var N=O.firstChild.offsetWidth;if(s&&N<a.sizeInfo.menuInnerInnerWidth&&a.sizeInfo.totalMenuWidth>a.sizeInfo.selectWidth)O.firstChild.style.minWidth=a.sizeInfo.menuInnerInnerWidth+"px";else if(N>a.sizeInfo.menuInnerInnerWidth){a.$menu[0].style.minWidth=0;var z=O.firstChild.offsetWidth;z>a.sizeInfo.menuInnerInnerWidth&&(a.sizeInfo.menuInnerInnerWidth=z,O.firstChild.style.minWidth=a.sizeInfo.menuInnerInnerWidth+"px"),a.$menu[0].style.minWidth=""}}}if(a.prevActiveIndex=a.activeIndex,a.options.liveSearch){if(t&&s){var R,H=0;a.selectpicker.view.canHighlight[H]||(H=1+a.selectpicker.view.canHighlight.slice(1).indexOf(!0)),R=a.selectpicker.view.visibleElements[H],a.defocusItem(a.selectpicker.view.currentActive),a.activeIndex=(a.selectpicker.current.data[H]||{}).index,a.focusItem(R)}}else a.$menuInner.trigger("focus")}var l,r,a=this,c=0,p=[];if(this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),s)if(n)c=this.$menuInner[0].scrollTop;else if(!a.multiple){var h=a.$element[0],d=(h.options[h.selectedIndex]||{}).liIndex;if("number"==typeof d&&!1!==a.options.size){var u=a.selectpicker.main.data[d],f=u&&u.position;f&&(c=f-(a.sizeInfo.menuInnerHeight+a.sizeInfo.liHeight)/2)}}o(c,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){a.noScroll||o(this.scrollTop,t),a.noScroll=!1}),e(window).off("resize"+B+"."+this.selectId+".createView").on("resize"+B+"."+this.selectId+".createView",function(){a.$newElement.hasClass(G.SHOW)&&o(a.$menuInner[0].scrollTop)})},focusItem:function(e,t,i){if(e){t=t||this.selectpicker.main.data[this.activeIndex];var s=e.firstChild;s&&(s.setAttribute("aria-setsize",this.selectpicker.view.size),s.setAttribute("aria-posinset",t.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",s.id),e.classList.add("active"),s.classList.add("active")))}},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var t=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),t=!0;var i=this.$element[0],s=!1,n=!this.selectpicker.view.titleOption.parentNode;n&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",s=void 0===e(i.options[i.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),!n&&0===this.selectpicker.view.titleOption.index||i.insertBefore(this.selectpicker.view.titleOption,i.firstChild),s&&(i.selectedIndex=0)}return t},createLi:function(){function e(e){var t=l[l.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",o.push(_(!1,G.DIVIDER,e.optID?e.optID+"div":void 0)),l.push(e))}function t(t,n){if((n=n||{}).divider="true"===t.getAttribute("data-divider"),n.divider)e({optID:n.optID});else{var a=l.length,c=t.style.cssText,p=c?N(c):"",h=(t.className||"")+(n.optgroupClass||"");n.optID&&(h="opt "+h),n.text=t.textContent,n.content=t.getAttribute("data-content"),n.tokens=t.getAttribute("data-tokens"),n.subtext=t.getAttribute("data-subtext"),n.icon=t.getAttribute("data-icon"),n.iconBase=s;var d=q(n),u=_(M(d,h,p),"",n.optID);u.firstChild&&(u.firstChild.id=i.selectId+"-"+a),o.push(u),t.liIndex=a,n.display=n.content||n.text,n.type="option",n.index=a,n.option=t,n.disabled=n.disabled||t.disabled,l.push(n);var f=0;n.display&&(f+=n.display.length),n.subtext&&(f+=n.subtext.length),n.icon&&(f+=1),r<f&&(r=f,i.selectpicker.view.widestOption=o[o.length-1])}}var i=this,s=this.options.iconBase,n=':not([hidden]):not([data-hidden="true"])',o=[],l=[],r=0,a=0,c=this.setPlaceholder()?1:0;this.options.hideDisabled&&(n+=":not(:disabled)"),!i.options.showTick&&!i.multiple||U.checkMark.parentNode||(U.checkMark.className=s+" "+i.options.tickIcon+" check-mark",U.a.appendChild(U.checkMark));for(var p=this.$element[0].querySelectorAll("select > *"+n),h=p.length;c<h;c++){var d=p[c];"OPTGROUP"!==d.tagName?t(d,{}):function(i,r){var c=r[i],p=r[i-1],h=r[i+1],d=c.querySelectorAll("option"+n);if(d.length){var u,f,m={label:N(c.label),subtext:c.getAttribute("data-subtext"),icon:c.getAttribute("data-icon"),iconBase:s},g=" "+(c.className||"");a++,p&&e({optID:a});var v=F(m);o.push(_(v,"dropdown-header"+g,a)),l.push({display:m.label,subtext:m.subtext,type:"optgroup-label",optID:a});for(var b=0,w=d.length;b<w;b++){var x=d[b];0===b&&(f=(u=l.length-1)+w),t(x,{headerIndex:u,lastIndex:f,optID:a,optgroupClass:g,disabled:c.disabled})}h&&e({optID:a})}}(c,p)}this.selectpicker.main.elements=o,this.selectpicker.main.data=l,this.selectpicker.current=this.selectpicker.main},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){this.setPlaceholder();var e,t=this,s=this.$element[0],l=n(s,this.options.hideDisabled),r=l.length,a=this.$button[0],c=a.querySelector(".filter-option-inner-inner"),p=document.createTextNode(this.options.multipleSeparator),h=U.fragment.cloneNode(!1),d=!1;if(a.classList.toggle("bs-placeholder",t.multiple?!r:!o(s,l)),this.tabIndex(),"static"===this.options.selectedTextFormat)h=q({text:this.options.title},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&1<r&&(1<(e=this.options.selectedTextFormat.split(">")).length&&r>e[1]||1===e.length&&2<=r))){for(var u=0;u<r&&u<50;u++){var f=l[u],m={},g={content:f.getAttribute("data-content"),subtext:f.getAttribute("data-subtext"),icon:f.getAttribute("data-icon")};this.multiple&&0<u&&h.appendChild(p.cloneNode(!1)),f.title?m.text=f.title:g.content&&t.options.showContent?(m.content=g.content.toString(),d=!0):(t.options.showIcon&&(m.icon=g.icon,m.iconBase=this.options.iconBase),t.options.showSubtext&&!t.multiple&&g.subtext&&(m.subtext=" "+g.subtext),m.text=f.textContent.trim()),h.appendChild(q(m,!0))}49<r&&h.appendChild(document.createTextNode("..."))}else{var v=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(v+=":not(:disabled)");var b=this.$element[0].querySelectorAll("select > option"+v+", optgroup"+v+" option"+v).length,w="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r,b):this.options.countSelectedText;h=q({text:w.replace("{0}",r.toString()).replace("{1}",b.toString())},!0)}if(null==this.options.title&&(this.options.title=this.$element.attr("title")),h.childNodes.length||(h=q({text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),a.title=h.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&d&&i([h],t.options.whiteList,t.options.sanitizeFn),c.innerHTML="",c.appendChild(h),R.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var x=a.querySelector(".filter-expand"),I=c.cloneNode(!0);I.className="filter-expand",x?a.replaceChild(I,x):a.appendChild(I)}this.$element.trigger("rendered"+B)},setStyle:function(e,t){var i,s=this.$button[0],n=this.$newElement[0],o=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),R.major<4&&(n.classList.add("bs3"),n.parentNode.classList.contains("input-group")&&(n.previousElementSibling||n.nextElementSibling)&&(n.previousElementSibling||n.nextElementSibling).classList.contains("input-group-addon")&&n.classList.add("bs3-has-addon")),i=e?e.trim():o,"add"==t?i&&s.classList.add.apply(s.classList,i.split(" ")):"remove"==t?i&&s.classList.remove.apply(s.classList,i.split(" ")):(o&&s.classList.remove.apply(s.classList,o.split(" ")),i&&s.classList.add.apply(s.classList,i.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("ul"),l=document.createElement("li"),a=document.createElement("li"),c=document.createElement("li"),p=document.createElement("a"),h=document.createElement("span"),d=this.options.header&&0<this.$menu.find("."+G.POPOVERHEADER).length?this.$menu.find("."+G.POPOVERHEADER)[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,f=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,g=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,h.className="text",p.className="dropdown-item "+(g?g.className:""),i.className=this.$menu[0].parentNode.className+" "+G.SHOW,i.style.width=0,"auto"===this.options.width&&(s.style.minWidth=0),s.className=G.MENU+" "+G.SHOW,n.className="inner "+G.SHOW,o.className=G.MENU+" inner "+("4"===R.major?G.SHOW:""),l.className=G.DIVIDER,a.className="dropdown-header",h.appendChild(document.createTextNode("​")),p.appendChild(h),c.appendChild(p),a.appendChild(h.cloneNode(!0)),this.selectpicker.view.widestOption&&o.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),o.appendChild(c),o.appendChild(l),o.appendChild(a),d&&s.appendChild(d),u){var v=document.createElement("input");u.className="bs-searchbox",v.className="form-control",u.appendChild(v),s.appendChild(u)}f&&s.appendChild(f),n.appendChild(o),s.appendChild(n),m&&s.appendChild(m),i.appendChild(s),document.body.appendChild(i);var b,w=c.offsetHeight,x=a?a.offsetHeight:0,I=d?d.offsetHeight:0,y=u?u.offsetHeight:0,k=f?f.offsetHeight:0,O=m?m.offsetHeight:0,$=e(l).outerHeight(!0),S=!!window.getComputedStyle&&window.getComputedStyle(s),E=s.offsetWidth,C=S?null:e(s),L={vert:r(S?S.paddingTop:C.css("paddingTop"))+r(S?S.paddingBottom:C.css("paddingBottom"))+r(S?S.borderTopWidth:C.css("borderTopWidth"))+r(S?S.borderBottomWidth:C.css("borderBottomWidth")),horiz:r(S?S.paddingLeft:C.css("paddingLeft"))+r(S?S.paddingRight:C.css("paddingRight"))+r(S?S.borderLeftWidth:C.css("borderLeftWidth"))+r(S?S.borderRightWidth:C.css("borderRightWidth"))},T={vert:L.vert+r(S?S.marginTop:C.css("marginTop"))+r(S?S.marginBottom:C.css("marginBottom"))+2,horiz:L.horiz+r(S?S.marginLeft:C.css("marginLeft"))+r(S?S.marginRight:C.css("marginRight"))+2};n.style.overflowY="scroll",b=s.offsetWidth-E,document.body.removeChild(i),this.sizeInfo.liHeight=w,this.sizeInfo.dropdownHeaderHeight=x,this.sizeInfo.headerHeight=I,this.sizeInfo.searchHeight=y,this.sizeInfo.actionsHeight=k,this.sizeInfo.doneButtonHeight=O,this.sizeInfo.dividerHeight=$,this.sizeInfo.menuPadding=L,this.sizeInfo.menuExtras=T,this.sizeInfo.menuWidth=E,this.sizeInfo.menuInnerInnerWidth=E-L.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=b,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=e(window),s=this.$newElement.offset(),n=e(this.options.container);this.options.container&&n.length&&!n.is("body")?((t=n.offset()).top+=parseInt(n.css("borderTopWidth")),t.left+=parseInt(n.css("borderLeftWidth"))):t={top:0,left:0};var o=this.options.windowPadding;this.sizeInfo.selectOffsetTop=s.top-t.top-i.scrollTop(),this.sizeInfo.selectOffsetBot=i.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-o[2],this.sizeInfo.selectOffsetLeft=s.left-t.left-i.scrollLeft(),this.sizeInfo.selectOffsetRight=i.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-o[1],this.sizeInfo.selectOffsetTop-=o[0],this.sizeInfo.selectOffsetLeft-=o[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,n,o,l,r,a=this.sizeInfo.selectWidth,c=this.sizeInfo.liHeight,p=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,d=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(r=c*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(G.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&r+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)n=3<this.selectpicker.current.elements.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=n+p+h+d+u,l=Math.max(n-m.vert,0),this.$newElement.hasClass(G.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),t=(o=i)-p-h-d-u-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var v=0;v<this.options.size;v++)"divider"===this.selectpicker.current.data[v].type&&g++;t=(i=c*this.options.size+g*f+m.vert)-m.vert,o=i+p+h+d+u,s=l=""}this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":l+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(G.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-a),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var i=this,s=e(window);this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),"auto"===this.options.size?s.off("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize").on("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize",function(){return i.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize"),i.createView(!1,!0,t)}},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+B,function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function t(t){var r={},a=o.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;o.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(G.DROPUP,t.hasClass(G.DROPUP)),i=t.offset(),l.is("body")?s={top:0,left:0}:((s=l.offset()).top+=parseInt(l.css("borderTopWidth"))-l.scrollTop(),s.left+=parseInt(l.css("borderLeftWidth"))-l.scrollLeft()),n=t.hasClass(G.DROPUP)?0:t[0].offsetHeight,(R.major<4||"static"===a)&&(r.top=i.top-s.top+n,r.left=i.left-s.left),r.width=t[0].offsetWidth,o.$bsContainer.css(r)}this.$bsContainer=e('<div class="bs-container" />');var i,s,n,o=this,l=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){o.isDisabled()||(t(o.$newElement),o.$bsContainer.appendTo(o.options.container).toggleClass(G.SHOW,!o.$button.hasClass(G.SHOW)).append(o.$menu))}),e(window).off("resize"+B+"."+this.selectId+" scroll"+B+"."+this.selectId).on("resize"+B+"."+this.selectId+" scroll"+B+"."+this.selectId,function(){o.$newElement.hasClass(G.SHOW)&&t(o.$newElement)}),this.$element.on("hide"+B,function(){o.$menu.data("height",o.$menu.height()),o.$bsContainer.detach()})},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length)for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var s=t.selectpicker.current.data[i+t.selectpicker.view.position0],n=s.option;n&&(!0!==e&&t.setDisabled(s.index,s.disabled),t.setSelected(s.index,n.selected))}},setSelected:function(e,t){var i,s,n=this.selectpicker.main.elements[e],o=this.selectpicker.main.data[e],l=void 0!==this.activeIndex,r=this.activeIndex===e||t&&!this.multiple&&!l;o.selected=t,s=n.firstChild,t&&(this.selectedIndex=e),n.classList.toggle("selected",t),r?(this.focusItem(n,o),this.selectpicker.view.currentActive=n,this.activeIndex=e):this.defocusItem(n),s&&(s.classList.toggle("selected",t),t?s.setAttribute("aria-selected",!0):this.multiple?s.setAttribute("aria-selected",!1):s.removeAttribute("aria-selected")),r||l||!t||void 0===this.prevActiveIndex||(i=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(i))},setDisabled:function(e,t){var i,s=this.selectpicker.main.elements[e];this.selectpicker.main.data[e].disabled=t,i=s.firstChild,s.classList.toggle(G.DISABLED,t),i&&("4"===R.major&&i.classList.toggle(G.DISABLED,t),t?(i.setAttribute("aria-disabled",t),i.setAttribute("tabindex",-1)):(i.removeAttribute("aria-disabled"),i.setAttribute("tabindex",0)))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(G.DISABLED),this.$button.addClass(G.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button[0].classList.contains(G.DISABLED)&&(this.$newElement[0].classList.remove(G.DISABLED),this.$button.removeClass(G.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){function t(){s.options.liveSearch?s.$searchbox.trigger("focus"):s.$menuInner.trigger("focus")}function i(){s.dropdown&&s.dropdown._popper&&s.dropdown._popper.state.isCreated?t():requestAnimationFrame(i)}var s=this,l=e(document);l.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&l.data("spaceSelect")&&(e.preventDefault(),l.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){3<R.major&&!s.dropdown&&(s.dropdown=s.$button.data("bs.dropdown"),s.dropdown._menu=s.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){s.$newElement.hasClass(G.SHOW)||s.setSize()}),this.$element.on("shown"+B,function(){s.$menuInner[0].scrollTop!==s.selectpicker.view.scrollTop&&(s.$menuInner[0].scrollTop=s.selectpicker.view.scrollTop),3<R.major?requestAnimationFrame(i):t()}),this.$menuInner.on("mouseenter","li a",function(e){var t=this.parentElement,i=s.isVirtual()?s.selectpicker.view.position0:0,n=Array.prototype.indexOf.call(t.parentElement.children,t),o=s.selectpicker.current.data[n+i];s.focusItem(t,o,!0)}),this.$menuInner.on("click","li a",function(t,i){var l=e(this),r=s.$element[0],a=s.isVirtual()?s.selectpicker.view.position0:0,c=s.selectpicker.current.data[l.parent().index()+a],p=c.index,h=o(r),d=r.selectedIndex,u=r.options[d],f=!0;if(s.multiple&&1!==s.options.maxOptions&&t.stopPropagation(),t.preventDefault(),!s.isDisabled()&&!l.parent().hasClass(G.DISABLED)){var m=c.option,g=e(m),v=m.selected,b=g.parent("optgroup"),w=b.find("option"),x=s.options.maxOptions,I=b.data("maxOptions")||!1;if(p===s.activeIndex&&(i=!0),i||(s.prevActiveIndex=s.activeIndex,s.activeIndex=void 0),s.multiple){if(m.selected=!v,s.setSelected(p,!v),l.trigger("blur"),!1!==x||!1!==I){var y=x<n(r).length,k=I<b.find("option:selected").length;if(x&&y||I&&k)if(x&&1==x)r.selectedIndex=-1,m.selected=!0,s.setOptionStatus(!0);else if(I&&1==I){for(var $=0;$<w.length;$++){var S=w[$];S.selected=!1,s.setSelected(S.liIndex,!1)}m.selected=!0,s.setSelected(p,!0)}else{var E="string"==typeof s.options.maxOptionsText?[s.options.maxOptionsText,s.options.maxOptionsText]:s.options.maxOptionsText,C="function"==typeof E?E(x,I):E,L=C[0].replace("{n}",x),T=C[1].replace("{n}",I),A=e('<div class="notify"></div>');C[2]&&(L=L.replace("{var}",C[2][1<x?0:1]),T=T.replace("{var}",C[2][1<I?0:1])),m.selected=!1,s.$menu.append(A),x&&y&&(A.append(e("<div>"+L+"</div>")),f=!1,s.$element.trigger("maxReached"+B)),I&&k&&(A.append(e("<div>"+T+"</div>")),f=!1,s.$element.trigger("maxReachedGrp"+B)),setTimeout(function(){s.setSelected(p,!1)},10),A[0].classList.add("fadeOut"),setTimeout(function(){A.remove()},1050)}}}else u&&(u.selected=!1),m.selected=!0,s.setSelected(p,!0);!s.multiple||s.multiple&&1===s.options.maxOptions?s.$button.trigger("focus"):s.options.liveSearch&&s.$searchbox.trigger("focus"),f&&(!s.multiple&&d===r.selectedIndex||(O=[m.index,g.prop("selected"),h],s.$element.triggerNative("change")))}}),this.$menu.on("click","li."+G.DISABLED+" a, ."+G.POPOVERHEADER+", ."+G.POPOVERHEADER+" :not(.close)",function(t){t.currentTarget==this&&(t.preventDefault(),t.stopPropagation(),s.options.liveSearch&&!e(t.target).hasClass("close")?s.$searchbox.trigger("focus"):s.$button.trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),s.options.liveSearch?s.$searchbox.trigger("focus"):s.$button.trigger("focus")}),this.$menu.on("click","."+G.POPOVERHEADER+" .close",function(){s.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(t){s.options.liveSearch?s.$searchbox.trigger("focus"):s.$button.trigger("focus"),t.preventDefault(),t.stopPropagation(),e(this).hasClass("bs-select-all")?s.selectAll():s.deselectAll()}),this.$element.on("change"+B,function(){s.render(),s.$element.trigger("changed"+B,O),O=null}).on("focus"+B,function(){s.options.mobile||s.$button.trigger("focus")})},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&e.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var i=e.$searchbox.val();if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],i){var s=[],n=i.toUpperCase(),o={},r=[],a=e._searchStyle(),p=e.options.liveSearchNormalize;p&&(n=c(n)),e._$lisSelected=e.$menuInner.find(".selected");for(var h=0;h<e.selectpicker.main.data.length;h++){var d=e.selectpicker.main.data[h];o[h]||(o[h]=l(d,n,a,p)),o[h]&&void 0!==d.headerIndex&&-1===r.indexOf(d.headerIndex)&&(0<d.headerIndex&&(o[d.headerIndex-1]=!0,r.push(d.headerIndex-1)),o[d.headerIndex]=!0,r.push(d.headerIndex),o[d.lastIndex+1]=!0),o[h]&&"optgroup-label"!==d.type&&r.push(h)}h=0;for(var u=r.length;h<u;h++){var f=r[h],m=r[h-1],g=(d=e.selectpicker.main.data[f],e.selectpicker.main.data[m]);("divider"!==d.type||"divider"===d.type&&g&&"divider"!==g.type&&u-1!==h)&&(e.selectpicker.search.data.push(d),s.push(e.selectpicker.main.elements[f]))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=s,e.createView(!0),s.length||(t.className="no-results",t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+N(i)+'"'),e.$menuInner[0].firstChild.appendChild(t))}else e.$menuInner.scrollTop(0),e.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0===e)return this.$element.val();var i=o(t);if(O=[null,null,i],this.$element.val(e).trigger("changed"+B,O),this.$newElement.hasClass(G.SHOW))if(this.multiple)this.setOptionStatus(!0);else{var s=(t.options[t.selectedIndex]||{}).liIndex;"number"==typeof s&&(this.setSelected(this.selectedIndex,!1),this.setSelected(s,!0))}return this.render(),O=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,s=0,n=o(t);t.classList.add("bs-select-hidden");for(var l=0,r=this.selectpicker.current.elements.length;l<r;l++){var a=this.selectpicker.current.data[l],c=a.option;c&&!a.disabled&&"divider"!==a.type&&(a.selected&&i++,(c.selected=e)&&s++)}t.classList.remove("bs-select-hidden"),i!==s&&(this.setOptionStatus(),O=[null,null,n],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var i,s,n,o,r,a=e(this),c=a.hasClass("dropdown-toggle"),p=(c?a.closest(".dropdown"):a.closest(P.MENU)).data("this"),h=p.findLis(),d=!1,u=9===t.which&&!c&&!p.options.selectOnTab,f=j.test(t.which)||u,m=p.$menuInner[0].scrollTop,g=!0===p.isVirtual()?p.selectpicker.view.position0:0;if(!(112<=t.which&&t.which<=123))if(!(s=p.$newElement.hasClass(G.SHOW))&&(f||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(p.$button.trigger("click.bs.dropdown.data-api"),p.options.liveSearch))p.$searchbox.trigger("focus");else{if(27===t.which&&s&&(t.preventDefault(),p.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),f){if(!h.length)return;-1!==(i=(n=p.selectpicker.main.elements[p.activeIndex])?Array.prototype.indexOf.call(n.parentElement.children,n):-1)&&p.defocusItem(n),38===t.which?(-1!==i&&i--,i+g<0&&(i+=h.length),p.selectpicker.view.canHighlight[i+g]||-1==(i=p.selectpicker.view.canHighlight.slice(0,i+g).lastIndexOf(!0)-g)&&(i=h.length-1)):40!==t.which&&!u||(++i+g>=p.selectpicker.view.canHighlight.length&&(i=0),p.selectpicker.view.canHighlight[i+g]||(i=i+1+p.selectpicker.view.canHighlight.slice(i+g+1).indexOf(!0))),t.preventDefault();var v=g+i;38===t.which?0===g&&i===h.length-1?(p.$menuInner[0].scrollTop=p.$menuInner[0].scrollHeight,v=p.selectpicker.current.elements.length-1):d=(r=(o=p.selectpicker.current.data[v]).position-o.height)<m:40!==t.which&&!u||(0===i?v=p.$menuInner[0].scrollTop=0:d=m<(r=(o=p.selectpicker.current.data[v]).position-p.sizeInfo.menuInnerHeight)),n=p.selectpicker.current.elements[v],p.activeIndex=p.selectpicker.current.data[v].index,p.focusItem(n),p.selectpicker.view.currentActive=n,d&&(p.$menuInner[0].scrollTop=r),p.options.liveSearch?p.$searchbox.trigger("focus"):a.trigger("focus")}else if(!a.is("input")&&!W.test(t.which)||32===t.which&&p.selectpicker.keydown.keyHistory){var b,w,x=[];t.preventDefault(),p.selectpicker.keydown.keyHistory+=z[t.which],p.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(p.selectpicker.keydown.resetKeyHistory.cancel),p.selectpicker.keydown.resetKeyHistory.cancel=p.selectpicker.keydown.resetKeyHistory.start(),w=p.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(w)&&(w=w.charAt(0));for(var I=0;I<p.selectpicker.current.data.length;I++){var y=p.selectpicker.current.data[I];l(y,w,"startsWith",!0)&&p.selectpicker.view.canHighlight[I]&&x.push(y.index)}if(x.length){var k=0;h.removeClass("active").find("a").removeClass("active"),1===w.length&&(-1===(k=x.indexOf(p.activeIndex))||k===x.length-1?k=0:k++),b=x[k],d=0<m-(o=p.selectpicker.main.data[b]).position?(r=o.position-o.height,!0):(r=o.position-p.sizeInfo.menuInnerHeight,o.position>m+p.sizeInfo.menuInnerHeight),n=p.selectpicker.main.elements[b],p.activeIndex=x[k],p.focusItem(n),n&&n.firstChild.focus(),d&&(p.$menuInner[0].scrollTop=r),a.trigger("focus")}}s&&(32===t.which&&!p.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&p.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),p.options.liveSearch&&32===t.which||(p.$menuInner.find(".active a").trigger("click",!0),a.trigger("focus"),p.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.checkDisabled(),this.setStyle(),this.render(),this.createLi(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+B)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(B).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(B+"."+this.selectId)}};var K=e.fn.selectpicker;e.fn.selectpicker=h,e.fn.selectpicker.Constructor=V,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=K,this},e(document).off("keydown.bs.dropdown.data-api",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select .dropdown-menu').on("keydown"+B,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',V.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load"+B+".data-api",function(){e(".selectpicker").each(function(){var t=e(this);h.call(t,t.data())})})}(e)}),function(e,t){var i=function(i,s){var n,o,l=this;s=s||{},this.$element=e(i),this.options=e.extend(!0,{},e.fn.ajaxSelectPicker.defaults,s),this.LOG_ERROR=1,this.LOG_WARNING=2,this.LOG_INFO=3,this.LOG_DEBUG=4,this.lastRequest=!1,this.previousQuery="",this.query="",this.request=!1;var r=[{from:"ajaxResultsPreHook",to:"preprocessData"},{from:"ajaxSearchUrl",to:{ajax:{url:"{{{value}}}"}}},{from:"ajaxOptions",to:"ajax"},{from:"debug",to:function(t){var i={};i.log=Boolean(l.options[t.from])?l.LOG_DEBUG:0,l.options=e.extend(!0,{},l.options,i),delete l.options[t.from],l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i)}},{from:"mixWithCurrents",to:"preserveSelected"},{from:"placeHolderOption",to:{locale:{emptyTitle:"{{{value}}}"}}}];r.length&&e.map(r,function(t){if(l.options[t.from])if(e.isPlainObject(t.to))l.replaceValue(t.to,"{{{value}}}",l.options[t.from]),l.options=e.extend(!0,{},l.options,t.to),l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',t.to),delete l.options[t.from];else if(e.isFunction(t.to))t.to.apply(l,[t]);else{var i={};i[t.to]=l.options[t.from],l.options=e.extend(!0,{},l.options,i),l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i),delete l.options[t.from]}});var a=this.$element.data();a.searchUrl&&(l.log(l.LOG_WARNING,'Deprecated attribute name: "data-search-url". Update markup to use: \' data-abs-ajax-url="'+a.searchUrl+"\" '"),this.options.ajax.url=a.searchUrl);var c=function(e,t,i){var s=[].concat(e),n=s.length,o=i||{};if(n){var l=s.shift();o[l]=c(s,t,o[l])}return n?o:t},p=Object.keys(a).filter(/./.test.bind(new RegExp("^abs[A-Z]")));if(p.length){var h={},d=["locale"];for(n=0,o=p.length;n<o;n++){var u=p[n].replace(/^abs([A-Z])/,function(e,t){return t.toLowerCase()}).replace(/([A-Z])/g,"-$1").toLowerCase(),f=u.split("-");if(f[0]&&f.length>1&&-1!==d.indexOf(f[0])){for(var m=[f.shift()],g="",v=0;v<f.length;v++)g+=0===v?f[v]:f[v].charAt(0).toUpperCase()+f[v].slice(1);m.push(g),f=m}this.log(this.LOG_DEBUG,'Processing data attribute "data-abs-'+u+'":',a[p[n]]),c(f,a[p[n]],h)}this.options=e.extend(!0,{},this.options,h),this.log(this.LOG_DEBUG,"Merged in the data attribute options: ",h,this.options)}if(this.selectpicker=a.selectpicker,!this.selectpicker)return this.log(this.LOG_ERROR,"Cannot instantiate an AjaxBootstrapSelect instance without selectpicker first being initialized!"),null;if(!this.options.ajax.url)return this.log(this.LOG_ERROR,'Option "ajax.url" must be set! Options:',this.options),null;if(this.locale=e.extend(!0,{},e.fn.ajaxSelectPicker.locale),this.options.langCode=this.options.langCode||t.navigator.userLanguage||t.navigator.language||"en",!this.locale[this.options.langCode]){var b=this.options.langCode;this.options.langCode="en";var w=b.split("-");for(n=0,o=w.length;n<o;n++){var x=w.join("-");if(x.length&&this.locale[x]){this.options.langCode=x;break}w.pop()}this.log(this.LOG_WARNING,'Unknown langCode option: "'+b+'". Using the following langCode instead: "'+this.options.langCode+'".')}this.locale[this.options.langCode]=e.extend(!0,{},this.locale[this.options.langCode],this.options.locale),this.list=new t.AjaxBootstrapSelectList(this),this.list.refresh(),setTimeout(function(){l.init()},500)};i.prototype.init=function(){var i,s=this;this.options.preserveSelected&&this.selectpicker.$menu.off("click",".actions-btn").on("click",".actions-btn",function(t){s.selectpicker.options.liveSearch?s.selectpicker.$searchbox.focus():s.selectpicker.$button.focus(),t.preventDefault(),t.stopPropagation(),e(this).is(".bs-select-all")?(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!0),e(s.selectpicker.$lis).not(".disabled").addClass("selected"),s.selectpicker.render()):(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!1),e(s.selectpicker.$lis).not(".disabled").removeClass("selected"),s.selectpicker.render()),s.selectpicker.$element.change()}),this.selectpicker.$searchbox.attr("placeholder",this.t("searchPlaceholder")).off("input propertychange"),this.selectpicker.$searchbox.on(this.options.bindEvent,function(n){var o=s.selectpicker.$searchbox.val();if(s.log(s.LOG_DEBUG,'Bind event fired: "'+s.options.bindEvent+'", keyCode:',n.keyCode,n),s.options.cache||(s.options.ignoredKeys[13]="enter"),s.options.ignoredKeys[n.keyCode])s.log(s.LOG_DEBUG,"Key ignored.");else if(o.length<s.options.minLength)s.list.setStatus(s.t("statusTooShort"));else if(clearTimeout(i),o.length||(s.options.clearOnEmpty&&s.list.destroy(),s.options.emptyRequest)){if(s.previousQuery=s.query,s.query=o,s.options.cache&&13!==n.keyCode){var l=s.list.cacheGet(s.query);if(l)return s.list.setStatus(l.length?"":s.t("statusNoResults")),s.list.replaceOptions(l),void s.log(s.LOG_INFO,"Rebuilt options from cached data.")}i=setTimeout(function(){s.lastRequest&&s.lastRequest.jqXHR&&e.isFunction(s.lastRequest.jqXHR.abort)&&s.lastRequest.jqXHR.abort(),s.request=new t.AjaxBootstrapSelectRequest(s),s.request.jqXHR.always(function(){s.lastRequest=s.request,s.request=!1})},s.options.requestDelay||300)}})},i.prototype.log=function(e,i){if(t.console&&this.options.log){if("number"!=typeof this.options.log)switch("string"==typeof this.options.log&&(this.options.log=this.options.log.toLowerCase()),this.options.log){case!0:case"debug":this.options.log=this.LOG_DEBUG;break;case"info":this.options.log=this.LOG_INFO;break;case"warn":case"warning":this.options.log=this.LOG_WARNING;break;default:case!1:case"error":this.options.log=this.LOG_ERROR}if(e<=this.options.log){var s=[].slice.apply(arguments,[2]);switch(e){case this.LOG_DEBUG:e="debug";break;case this.LOG_INFO:e="info";break;case this.LOG_WARNING:e="warn";break;default:case this.LOG_ERROR:e="error"}var n="["+e.toUpperCase()+"] AjaxBootstrapSelect:";"string"==typeof i?s.unshift(n+" "+i):(s.unshift(i),s.unshift(n)),t.console[e].apply(t.console,s)}}},i.prototype.replaceValue=function(t,i,s,n){var o=this;n=e.extend({recursive:!0,depth:!1,limit:!1},n),e.each(t,function(l,r){return!(!1!==n.limit&&"number"==typeof n.limit&&n.limit<=0)&&void(e.isArray(t[l])||e.isPlainObject(t[l])?(n.recursive&&!1===n.depth||n.recursive&&"number"==typeof n.depth&&n.depth>0)&&o.replaceValue(t[l],i,s,n):r===i&&(!1!==n.limit&&"number"==typeof n.limit&&n.limit--,t[l]=s))})},i.prototype.t=function(e,t){return t=t||this.options.langCode,this.locale[t]&&this.locale[t].hasOwnProperty(e)?this.locale[t][e]:(this.log(this.LOG_WARNING,"Unknown translation key:",e),e)},t.AjaxBootstrapSelect=t.AjaxBootstrapSelect||i;var s=function(t){var i=this;this.$status=e(t.options.templates.status).hide().appendTo(t.selectpicker.$menu);var s=t.t("statusInitialized");s&&s.length&&this.setStatus(s),this.cache={},this.plugin=t,this.selected=[],this.title=null,this.selectedTextFormat=t.selectpicker.options.selectedTextFormat;var n=[];t.$element.find("option").each(function(){var i=e(this),s=i.attr("value");n.push({value:s,text:i.text(),class:i.attr("class")||"",data:i.data()||{},preserved:t.options.preserveSelected,selected:!!i.attr("selected")})}),this.cacheSet("",n),t.options.preserveSelected&&(i.selected=n,t.$element.on("change.abs.preserveSelected",function(s){var n=t.$element.find(":selected");i.selected=[],t.selectpicker.multiple||(n=n.last()),n.each(function(){var t=e(this),s=t.attr("value");i.selected.push({value:s,text:t.text(),class:t.attr("class")||"",data:t.data()||{},preserved:!0,selected:!0})}),i.replaceOptions(i.cacheGet(i.plugin.query))}))};s.prototype.build=function(t){var i,s,n=t.length,o=e("<select/>"),l=e("<optgroup/>").attr("label",this.plugin.t("currentlySelected"));for(this.plugin.log(this.plugin.LOG_DEBUG,"Building the select list options from data:",t),s=0;s<n;s++){var r=t[s],a=e("<option/>").appendTo(r.preserved?l:o);if(r.hasOwnProperty("divider"))a.attr("data-divider","true");else{a.val(r.value).text(r.text).attr("title",r.text),r.class.length&&a.attr("class",r.class),r.disabled&&a.attr("disabled",!0),r.selected&&!this.plugin.selectpicker.multiple&&o.find(":selected").prop("selected",!1),r.selected&&a.attr("selected",!0);for(i in r.data)r.data.hasOwnProperty(i)&&a.attr("data-"+i,r.data[i])}}l.find("option").length&&l["before"===this.plugin.options.preserveSelectedPosition?"prependTo":"appendTo"](o);var c=o.html();return this.plugin.log(this.plugin.LOG_DEBUG,c),c},s.prototype.cacheGet=function(e,t){var i=this.cache[e]||t;return this.plugin.log(this.LOG_DEBUG,"Retrieving cache:",e,i),i},s.prototype.cacheSet=function(e,t){this.cache[e]=t,this.plugin.log(this.LOG_DEBUG,"Saving to cache:",e,t)},s.prototype.destroy=function(){this.replaceOptions(),this.plugin.list.setStatus(),this.plugin.log(this.plugin.LOG_DEBUG,"Destroyed select list.")},s.prototype.refresh=function(e){this.plugin.selectpicker.$menu.css("minHeight",0),this.plugin.selectpicker.$menu.find("> .inner").css("minHeight",0);var t=this.plugin.t("emptyTitle");!this.plugin.$element.find("option").length&&t&&t.length?this.setTitle(t):(this.title||"static"!==this.selectedTextFormat&&this.selectedTextFormat!==this.plugin.selectpicker.options.selectedTextFormat)&&this.restoreTitle(),this.plugin.selectpicker.refresh(),this.plugin.selectpicker.findLis(),e&&(this.plugin.log(this.plugin.LOG_DEBUG,"Triggering Change"),this.plugin.$element.trigger("change.$")),this.plugin.log(this.plugin.LOG_DEBUG,"Refreshed select list.")},s.prototype.replaceOptions=function(e){var t,i,s,n="",o=[],l=[],r=[];if(e=e||[],this.selected&&this.selected.length){for(this.plugin.log(this.plugin.LOG_INFO,"Processing preserved selections:",this.selected),i=(l=[].concat(this.selected,e)).length,t=0;t<i;t++)(s=l[t]).hasOwnProperty("value")&&-1===r.indexOf(s.value+"")?(r.push(s.value+""),o.push(s)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring.");e=o}e.length&&(n=this.plugin.list.build(e)),this.plugin.$element.html(n),this.refresh(),this.plugin.log(this.plugin.LOG_DEBUG,"Replaced options with data:",e)},s.prototype.restore=function(){var e=this.plugin.list.cacheGet(this.plugin.previousQuery);return e&&this.plugin.list.replaceOptions(e)&&this.plugin.log(this.plugin.LOG_DEBUG,"Restored select list to the previous query: ",this.plugin.previousQuery),this.plugin.log(this.plugin.LOG_DEBUG,"Unable to restore select list to the previous query:",this.plugin.previousQuery),!1},s.prototype.restoreTitle=function(){this.plugin.request||(this.plugin.selectpicker.options.selectedTextFormat=this.selectedTextFormat,this.title?this.plugin.$element.attr("title",this.title):this.plugin.$element.removeAttr("title"),this.title=null)},s.prototype.setTitle=function(e){this.plugin.request||(this.title=this.plugin.$element.attr("title"),this.plugin.selectpicker.options.selectedTextFormat="static",this.plugin.$element.attr("title",e))},s.prototype.setStatus=function(e){(e=e||"").length?this.$status.html(e).show():this.$status.html("").hide()},t.AjaxBootstrapSelectList=t.AjaxBootstrapSelectList||s;var n=function(t){var i,s=this,n=["beforeSend","success","error","complete"],o=n.length;for(this.plugin=t,this.options=e.extend(!0,{},t.options.ajax),this.callbacks={},i=0;i<o;i++){var l=n[i];this.options[l]&&e.isFunction(this.options[l])&&(this.callbacks[l]=this.options[l]),this.options[l]=function(e){return function(){s.plugin.log(s.plugin.LOG_INFO,"Invoking AjaxBootstrapSelectRequest."+e+" callback:",arguments),s[e].apply(s,arguments),s.callbacks[e]&&(s.plugin.log(s.plugin.LOG_INFO,"Invoking ajax."+e+" callback:",arguments),s.callbacks[e].apply(s,arguments))}}(l)}this.options.data&&e.isFunction(this.options.data)&&(this.options.data=this.options.data.apply(this)||{q:"{{{q}}}"}),this.plugin.replaceValue(this.options.data,"{{{q}}}",this.plugin.query),this.jqXHR=e.ajax(this.options)};n.prototype.beforeSend=function(e){this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusSearching"))},n.prototype.complete=function(e,t){if("abort"!==t){var i=this.plugin.list.cacheGet(this.plugin.query);if(i){if(!i.length)return this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusNoResults")),void this.plugin.log(this.plugin.LOG_INFO,"No results were returned.");this.plugin.list.setStatus()}this.plugin.list.refresh(!0)}},n.prototype.error=function(e,t,i){"abort"!==t&&(this.plugin.list.cacheSet(this.plugin.query),this.plugin.options.clearOnError&&this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("errorText")),this.plugin.options.restoreOnError&&(this.plugin.list.restore(),this.plugin.list.setStatus()))},n.prototype.process=function(t){var i,s,n,o,l,r,a=[],c=[];if(this.plugin.log(this.plugin.LOG_INFO,"Processing raw data for:",this.plugin.query,t),l=t,e.isFunction(this.plugin.options.preprocessData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking preprocessData callback:",this.plugin.options.processData),void 0!==(n=this.plugin.options.preprocessData.apply(this,[l]))&&null!==n&&!1!==n&&(l=n)),!e.isArray(l))return this.plugin.log(this.plugin.LOG_ERROR,'The data returned is not an Array. Use the "preprocessData" callback option to parse the results and construct a proper array for this plugin.',l),!1;for(s=l.length,i=0;i<s;i++)o=l[i],this.plugin.log(this.plugin.LOG_DEBUG,"Processing item:",o),e.isPlainObject(o)&&(o.hasOwnProperty("divider")||o.hasOwnProperty("data")&&e.isPlainObject(o.data)&&o.data.divider?(this.plugin.log(this.plugin.LOG_DEBUG,"Item is a divider, ignoring provided data."),a.push({divider:!0})):o.hasOwnProperty("value")?-1===c.indexOf(o.value+"")?(c.push(o.value+""),o=e.extend({text:o.value,class:"",data:{},disabled:!1,selected:!1},o),a.push(o)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring."):this.plugin.log(this.plugin.LOG_DEBUG,'Data item must have a "value" property, skipping.'));if(r=[].concat(a),e.isFunction(this.plugin.options.processData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking processData callback:",this.plugin.options.processData),void 0!==(n=this.plugin.options.processData.apply(this,[r]))&&null!==n&&!1!==n)){if(!e.isArray(n))return this.plugin.log(this.plugin.LOG_ERROR,"The processData callback did not return an array.",n),!1;r=n}return this.plugin.list.cacheSet(this.plugin.query,r),this.plugin.log(this.plugin.LOG_INFO,"Processed data:",r),r},n.prototype.success=function(t,i,s){if(!e.isArray(t)&&!e.isPlainObject(t))return this.plugin.log(this.plugin.LOG_ERROR,"Request did not return a JSON Array or Object.",t),void this.plugin.list.destroy();var n=this.process(t);this.plugin.list.replaceOptions(n)},t.AjaxBootstrapSelectRequest=t.AjaxBootstrapSelectRequest||n,e.fn.ajaxSelectPicker=function(i){return this.each(function(){e(this).data("AjaxBootstrapSelect")||e(this).data("AjaxBootstrapSelect",new t.AjaxBootstrapSelect(this,i))})},e.fn.ajaxSelectPicker.locale={},e.fn.ajaxSelectPicker.defaults={ajax:{url:null,type:"POST",dataType:"json",data:{q:"{{{q}}}"}},minLength:0,bindEvent:"keyup",cache:!0,clearOnEmpty:!0,clearOnError:!0,emptyRequest:!1,ignoredKeys:{9:"tab",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",38:"up",40:"down",91:"meta"},langCode:null,locale:null,log:"error",preprocessData:function(){},preserveSelected:!0,preserveSelectedPosition:"after",processData:function(){},requestDelay:300,restoreOnError:!1,templates:{status:'<div class="status"></div>'}},e.fn.ajaxSelectPicker.locale["en-US"]={currentlySelected:"Currently Selected",emptyTitle:"Select and begin typing",errorText:"Unable to retrieve results",searchPlaceholder:"Search...",statusInitialized:"Start typing a search query",statusNoResults:"No Results",statusSearching:"Searching...",statusTooShort:"Please enter more characters"},e.fn.ajaxSelectPicker.locale.en=e.fn.ajaxSelectPicker.locale["en-US"]}(jQuery,window);